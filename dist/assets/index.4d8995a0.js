var ne=Object.defineProperty;var ie=(i,e,s)=>e in i?ne(i,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[e]=s;var c=(i,e,s)=>(ie(i,typeof e!="symbol"?e+"":e,s),s);import{r as m,o as h,c as g,a as L,n as b,b as p,u as r,F as oe,d as ae,p as re,e as le,t as K,f as Z,g as w,h as U,L as Q,G as M,B as E,i as D,j as ce,k as G,S as ue,M as pe,l as he,m as de,O as me,A as fe,P as ge,W as _e,q as ye,C as xe,s as ve,v as we,w as S,x as J,y as be}from"./vendor.142b7855.js";const Le=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))t(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&t(a)}).observe(document,{childList:!0,subtree:!0});function s(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function t(n){if(n.ep)return;n.ep=!0;const o=s(n);fetch(n.href,o)}};Le();const Se="modulepreload",q={},Pe="./",P=function(e,s){return!s||s.length===0?e():Promise.all(s.map(t=>{if(t=`${Pe}${t}`,t in q)return;q[t]=!0;const n=t.endsWith(".css"),o=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${o}`))return;const a=document.createElement("link");if(a.rel=n?"stylesheet":Se,n||(a.as="script",a.crossOrigin=""),a.href=t,document.head.appendChild(a),n)return new Promise((l,f)=>{a.addEventListener("load",l),a.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${t}`)))})})).then(()=>e())};var T=(i,e)=>{const s=i.__vccOpts||i;for(const[t,n]of e)s[t]=n;return s};const Ne={props:{flag:Boolean,index:Number},emits:["change"],setup(i,{emit:e}){const s=i,t=m(s.flag);function n(){t.value=!t.value;let o={flag:t.value,index:s.index};e("change",o)}return(o,a)=>(h(),g("div",{class:"switch",onClick:n,style:b({backgroundColor:t.value?"rgba(0,255,255,0.6)":"transparent"})},[L("div",{class:"circle",style:b({transform:t.value?"translateX(15px)":"translateX(1px)"})},null,4)],4))}};var V=T(Ne,[["__scopeId","data-v-dcb7cb72"]]);const d={isLogin:m(!1),msg:m(0),isOpenAnchor:m(!1)},_=m({effect:!0,comments:!0,piano:!0,dou:!0,net:!0,lyric:!0,control:!0,three:!0}),u=m({comments:{x:470,y:323},control:{x:874,y:595},dou:{x:1094,y:35},effect:{x:1254,y:491},lyric:{x:584,y:35},net:{x:100,y:35},piano:{x:36,y:425}});const ee=i=>(re("data-v-68bfa3a5"),i=i(),le(),i),Ie={class:"menu"},Oe={class:"item"},Ae=ee(()=>L("span",{class:"tip"},"\u81EA\u5B9A\u4E49\u4F4D\u7F6E",-1)),Me={class:"right"},ke={class:"tip"},je={class:"right"},Ce=ee(()=>L("span",{class:"msg"}," \u5982\u6709\u95EE\u9898\u6B22\u8FCE\u53D1\u9001\u5230\u90AE\u7BB1\uFF1A2282227679@qq.com ",-1)),Ee={setup(i){let e=["\u94A2\u7434","\u73AF\u7ED5\u97F3\u6548","3D\u80CC\u666F","\u6296\u97F3\u5217\u8868","\u7F51\u6613\u4E91\u5217\u8868","\u6B4C\u8BCD","\u8BC4\u8BBA","\u64AD\u653E\u63A7\u5236"],s=["piano","effect","three","dou","net","lyric","comments","control"];function t(n){_.value[s[n.index]]=n.flag,localStorage.setItem("show",JSON.stringify(Z(_.value)))}return(n,o)=>(h(),g("div",Ie,[L("div",Oe,[Ae,L("div",Me,[p(V,{class:"switch_",flag:!1,onChange:o[0]||(o[0]=a=>r(d).isOpenAnchor.value=a.flag)})])]),(h(!0),g(oe,null,ae(r(e),(a,l)=>(h(),g("div",{class:"item",key:l},[L("span",ke,K(a),1),L("div",je,[p(V,{class:"switch_",flag:r(_)[r(s)[l]],index:l,onChange:t},null,8,["flag","index"])])]))),128)),Ce]))}};var De=T(Ee,[["__scopeId","data-v-68bfa3a5"]]);const $e={props:{from:String},setup(i){const e=i;function s(){document.body.onmousemove=o=>t(o),document.body.onmouseup=n}function t(o){u.value[e.from].x+=o.movementX,u.value[e.from].y+=o.movementY}function n(){document.body.onmousemove=null,document.body.onmouseup=null,localStorage.setItem("position",JSON.stringify(u.value))}return(o,a)=>r(d).isOpenAnchor.value?(h(),g("div",{key:0,class:"anchor bg",onMousedown:s},null,32)):w("",!0)}};var I=T($e,[["__scopeId","data-v-48624fe9"]]),Te="./assets/back.3e30294c.jpg",Re="./assets/bottom.283b4be8.jpg",Ge="./assets/front.b9483333.jpg",Je="./assets/left.d7e0879d.jpg",Ue="./assets/right.80884b70.jpg",Fe="./assets/top.8b10a0eb.jpg";const y=U.create({baseURL:"https://ganqian1.vercel.app/",timeout:18e3,withCredentials:!0});y.interceptors.request.use(i=>(d.msg.value=1,i));y.interceptors.response.use(i=>(d.msg.value=0,i),i=>(d.msg.value=0,i));function ze(i){if(typeof i=="number"){let e=parseInt(i/60),s=parseInt(i-e*60);return e=e<10?`0${e}`:e,s=s<10?`0${s}`:s,`${e}:${s}`}else return parseInt(i.slice(0,2))*60+parseInt(i.slice(3,5))}function F(i){return i.map(e=>({name:e.name,id:e.id,author:e.ar.map(s=>s.name).join("/"),time:Math.floor(e.dt/1e3),platform:"net"}))}function lt(i){return new Promise((e,s)=>{y.get("/comment/music",{params:{id:i}}).then(t=>{let n=t.data.hotComments.reduce((o,a)=>o+"\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0"+a.user.nickname+"\uFF1A"+a.content,"");e(n.replace(`
`,""))}).catch(t=>console.log(t))})}function ct(){return new Promise((i,e)=>{y.get("/personal_fm").then(s=>{let t=s.data.data.map(n=>({name:n.name,id:n.id,author:n.artists.map(o=>o.name).join("/"),time:Math.floor(n.duration/1e3),platform:"net"}));i(t)}).catch(s=>console.log(s))})}function ut(i){return new Promise((e,s)=>{y.get("/like",{params:{id:i}}).catch(t=>console.log(t))})}function We(i){return d.msg.value=1,new Promise((e,s)=>{fetch(i,{responseType:"blob"}).then(t=>t.blob()).then(async t=>{d.msg.value=0;let n=URL.createObjectURL(t);e(n)}).catch(t=>{d.msg.value=0,console.log(t)})})}function pt(i){return new Promise((e,s)=>{y.get("/cloudsearch",{params:{keywords:i}}).then(t=>{e(F(t.data.result.songs))}).catch(t=>console.log(t))})}function ht(){return new Promise((i,e)=>{let s=JSON.parse(localStorage.getItem("user")).uid;y.get("/recommend/songs",{params:{uid:s}}).then(t=>{i(F(t.data.data.dailySongs))}).catch(t=>console.log(t))})}function dt(i){return new Promise((e,s)=>{y.get("/lyric",{params:{id:i}}).then(t=>{if(t=t.data,t.nolyric)e([]);else{let n=t.lrc.lyric.split(`
`),o=[];for(let a of n){if(a=="")continue;let l={};l.content=a.match(/](.*)/)[1],l.content!=""&&(l.time=a.slice(1,6),l.second=ze(l.time),o.push(l))}e(o)}}).catch(t=>console.log(t))})}function qe(i){return new Promise((e,s)=>{let t=`https://music.163.com/song/media/outer/url?id=${i}.mp3`;U({method:"POST",url:"https://ca448d14-fda5-4d8f-9279-3f4896d8f854.bspapp.com/index",data:JSON.stringify({action:"getNetEaseMusicUrl",url:t})}).then(o=>{if(o.data.url!="https://music.163.com/404"){let a=o.data.url.replace(/(http|https)/,"https");e(a)}else y.get(`/song/url?id=${i}`).then(a=>{let l=a.data.data[0].url.replace(/(http|https)/,"https");e(l)}).catch(a=>console.log(a))}).catch(o=>console.log(o))})}function mt(){return new Promise((i,e)=>{let s=localStorage.getItem("douList");s?i(JSON.parse(s)):(d.msg.value=1,U({method:"POST",url:"https://ca448d14-fda5-4d8f-9279-3f4896d8f854.bspapp.com/index",data:JSON.stringify({action:"getDouYin"})}).then(n=>{d.msg.value=0;let o=n.data.data.map(a=>({name:a.name,tag:a.tag,author:a.res.musicAuthor,time:a.res.musicDuration,url:a.res.musicUrl,platform:"dou"}));localStorage.setItem("douList",JSON.stringify(o)),i(o)}).catch(n=>{d.msg.value=0,console.log(n)}))})}async function ft(i){return new Promise((e,s)=>{y.get("/captcha/sent",{params:{phone:i}}).then(t=>{e(!0)}).catch(t=>console.log(t))})}async function gt(i,e){return new Promise((s,t)=>{y.get("/login/cellphone",{params:{phone:i,captcha:e}}).then(n=>{n=n.data;let o={uid:n.account.id,avatarUrl:n.profile.avatarUrl,nickName:n.profile.nickname};localStorage.setItem("user",JSON.stringify(o)),d.isLogin.value=!0,s()}).catch(n=>console.log(n))})}function _t(i){return new Promise((e,s)=>{let t=JSON.parse(localStorage.getItem("user")).uid,n=localStorage.getItem(`songsListNet${t}`),o=localStorage.getItem(`songListNet${i}`);o?e(JSON.parse(o)):y.get("/playlist/detail",{params:{id:i}}).then(a=>{let l=F(a.data.playlist.tracks);i==JSON.parse(n)[0].id&&localStorage.setItem(`songListNet${i}`,JSON.stringify(l)),e(l)}).catch(a=>console.log(a))})}function yt(){return new Promise((i,e)=>{let s=JSON.parse(localStorage.getItem("user")).uid,t=localStorage.getItem(`songsListNet${s}`);t?i(JSON.parse(t)):y.get("/user/playlist",{params:{uid:s}}).then(n=>{n=n.data;let o=[{id:n.playlist[0].id,name:"\u6211\u559C\u6B22"}];for(let a=1;a<n.playlist.length;a++)n.playlist[a].subscribed||o.push({id:n.playlist[a].id,name:n.playlist[a].name});localStorage.setItem(`songsListNet${s}`,JSON.stringify(o)),i(o)}).catch(n=>console.log(n))})}class Ve{constructor(){c(this,"ctx",null);c(this,"source",null);c(this,"audio",document.createElement("audio"));c(this,"fft",new Uint8Array(128));c(this,"analyser",null);c(this,"isPlay",m(!1));c(this,"music",m({}));c(this,"listDou",m([]));c(this,"listNet",m([]));c(this,"indexNet",m(0));c(this,"indexDou",m(0));c(this,"updateNetCb",null);c(this,"updateProgressCb",null);c(this,"order",m(0));c(this,"index",0);c(this,"listWant",[]);c(this,"isUserSlide",!1)}init(){this.ctx=new AudioContext,this.analyser=this.ctx.createAnalyser(),this.source=this.ctx.createMediaElementSource(this.audio),this.analyser.fftSize=256,this.source.connect(this.analyser).connect(this.ctx.destination),this.audio.ontimeupdate=()=>{this.updateNetCb&&this.music.value.platform=="net"&&this.updateNetCb(),this.updateProgressCb&&!this.isUserSlide&&this.updateProgressCb()};let e=this;this.audio.addEventListener("ended",this.next.bind(e))}async start(e,s){if(this.isPlay.value=!0,e.name==this.music.value.name){this.audio.play();return}this.ctx||this.init(),this.audio.pause(),this.music.value=e,this.index=s;let t;e.platform=="net"?(t=await qe(e.id),this.indexNet.value=s):e.platform=="dou"&&(t=e.url,this.indexDou.value=s);let n=await We(t);this.audio.src=n,this.audio.play()}next(){if(this.listWant.length==0){let e=this.music.value.platform=="net"?this.listNet.value:this.listDou.value;this.order==0?(this.index=this.index<e.length-1?this.index+1:0,this.start(e[this.index],this.index)):this.order==1?(this.index=Math.floor(Math.random()*e.length-1),this.start(e[this.index],this.index)):this.order==2&&this.audio.play()}else this.start(this.listWant[0]),this.listWant.shift()}last(){let e=this.music.value.platform=="net"?this.listNet.value:this.listDou.value;this.index=this.index-1<0?0:this.index-1,this.start(e[this.index],this.index)}pause(){this.audio.pause(),this.isPlay.value=!1}resume(){console.log("resume"),this.audio.play(),this.isPlay.value=!0}}const v=new Ve,$=40,X=5,B=128,Xe=.5,Be=20,He=65535,H=10,Ye=100,R=new Q({color:65535});class Ke{constructor(){c(this,"outLine");c(this,"inLine");c(this,"midLines",[]);c(this,"points",[]);c(this,"lineGroup",new M)}update(){let e=[],s=[];for(let t=0;t<v.fft.length;t++){let n=Math.PI*2/v.fft.length*t,o=Math.cos(n)*v.fft[t]*(X/256),a=Math.sin(n)*v.fft[t]*(X/256),l=[this.points[t*3]-o,0,this.points[t*3+2]-a,this.points[t*3]+o,0,this.points[t*3+2]+a];this.midLines[t].geometry.getAttribute("position").set(l,0),this.midLines[t].geometry.getAttribute("position").needsUpdate=!0,e.push(this.points[t*3]+o),e.push(0),e.push(this.points[t*3+2]+a),s.push(this.points[t*3]-o),s.push(0),s.push(this.points[t*3+2]-a)}this.outLine.geometry.getAttribute("position").set(e,0),this.inLine.geometry.getAttribute("position").set(s,0),this.outLine.geometry.getAttribute("position").needsUpdate=!0,this.inLine.geometry.getAttribute("position").needsUpdate=!0}init(){v.fft.forEach((t,n)=>{let o=Math.PI*2/v.fft.length*n,a=Math.cos(o)*$,l=0,f=Math.sin(o)*$;this.points.push(a,l,f);let x=new E;x.attributes.position=new D(new Float32Array([a,l,f,a,l,f]),3);let O=new ce(x,R);this.midLines.push(O),this.lineGroup.add(O)});let e=new E,s=new E;e.attributes.position=new D(new Float32Array(this.points),3),s.attributes.position=new D(new Float32Array(this.points),3),this.outLine=new G(e,R),this.inLine=new G(s,R),this.lineGroup.add(this.outLine,this.inLine)}}class Ze{constructor(){c(this,"sphereGroup")}init(){this.sphereGroup=new M;for(let e=0;e<B;e++){let s=new M,t=new ue(Xe),n=new pe({color:He}),o=new he(t,n);o.position.y=.5,s.add(o);let a=Math.PI*2/B*e+Math.PI/2,l=Math.sin(a)*$,f=Math.cos(a)*$;s.position.set(l,H,f),this.sphereGroup.add(s)}}update(){this.sphereGroup.children.forEach((e,s)=>{e.position.y=H+v.fft[s]*(Be/256)})}}class Y{constructor(){c(this,"speedT",C(.1,.2));c(this,"distance",0);c(this,"lifeDistance",300);c(this,"loopLine",null);this.angle=Math.random()*Math.PI*2,this.x=Math.cos(this.angle)*5,this.y=0,this.z=Math.sin(this.angle)*5;let t=[];for(let n=0;n<3;n++)t.push(C(-1,1)),t.push(C(-1,1)),t.push(C(-1,1));this.geometry=new E,this.geometry.attributes.position=new D(new Float32Array(t),3),this.material=new Q({color:65535}),this.material.transparent=!0,this.loopLine=new G(this.geometry,this.material),this.loopLine.position.set(this.x,this.y,this.z)}update(){this.x+=this.speedT*Math.cos(this.angle),this.z+=this.speedT*Math.sin(this.angle),this.distance+=this.speedT,this.loopLine.position.set(this.x,this.y,this.z)}}class Qe{constructor(){c(this,"intervelCount",0);c(this,"traingles",[]);c(this,"traingleGroup",new M)}init(){for(let e=0;e<10;e++){let s=new Y;this.traingles.push(s),this.traingleGroup.add(s.loopLine)}}update(){if(this.intervelCount++,this.intervelCount>20){for(let e=0;e<3;e++){let s=new Y;this.traingles.push(s),this.traingleGroup.add(s.loopLine)}this.intervelCount=0}for(let e=0;e<this.traingles.length;e++){let s=this.traingles[e];s.update(),s.distance>s.lifeDistance&&(this.traingleGroup.remove(s.loopLine),s.geometry.dispose(),s.material.dispose(),this.traingles.splice(e--,1))}}}function C(i,e){return Math.random()*(e-i)+i}const et={setup(i){const e=m(null);let s,t,n,o,a,l,f,x;de(()=>{O(),k()});function O(){te(),j(),A(),z(),a=new M,t.add(a),l=new Ke,l.init(),f=new Ze,f.init(),x=new Qe,t.add(x.traingleGroup),x.init()}function k(){var N;requestAnimationFrame(k),(N=v.analyser)==null||N.getByteFrequencyData(v.fft),o.update(),a.rotateY(.003),!v.isPlay.value&&a.children.length==2?a.children=[]:v.isPlay.value&&(a.children.length==0&&(a.add(f.sphereGroup),a.add(l.lineGroup)),f.update(),l.update()),x.update(),s.render(t,n)}function j(){o=new me(n,s.domElement),o.enablePan=!1,o.enableDamping=!0,o.enableZoom=!0,o.minDistance=0,o.maxDistance=1e3}function z(){window.addEventListener("resize",()=>{n.aspect=window.innerWidth/window.innerHeight,n.updateProjectionMatrix(),s.setSize(window.innerWidth,window.innerHeight)})}function A(){t.add(new fe(65535));let N=new ge(65535);N.position.set(0,100,0),N.castShadow=!0}function te(){s=new _e({antialias:!0,alpha:!0,canvas:e.value}),s.setSize(window.innerWidth,window.innerHeight),t=new ye,t.background=new xe().load(se()),n=new ve(75,innerWidth/innerHeight,1,1e4),n.position.set(-80,20,-50),n.lookAt(0,0,0),new we(Ye)}function se(){return["right.jpg","left.jpg","top.jpg","bottom.jpg","front.jpg","back.jpg"].map(W=>new URL({"../../assets/skybox/back.jpg":Te,"../../assets/skybox/bottom.jpg":Re,"../../assets/skybox/front.jpg":Ge,"../../assets/skybox/left.jpg":Je,"../../assets/skybox/right.jpg":Ue,"../../assets/skybox/top.jpg":Fe}[`../../assets/skybox/${W}`],self.location).href)}return(N,W)=>(h(),g("canvas",{class:"canvas",ref_key:"canvas",ref:e},null,512))}};const tt={class:"index"},st={class:"msg"},nt={setup(i){const e=S(()=>P(()=>import("./lyric.b157d69a.js"),["assets/lyric.b157d69a.js","assets/lyric.90b6dae2.css","assets/Animator.194adef1.js","assets/vendor.142b7855.js"])),s=S(()=>P(()=>import("./net.b448a253.js"),["assets/net.b448a253.js","assets/net.a6f7b61a.css","assets/vendor.142b7855.js","assets/list1.20055c67.js","assets/list1.ddb9c7e7.css","assets/Animator.194adef1.js"])),t=S(()=>P(()=>import("./control.556e28b5.js"),["assets/control.556e28b5.js","assets/control.539d1257.css","assets/vendor.142b7855.js"])),n=S(()=>P(()=>import("./dou.b57076b5.js"),["assets/dou.b57076b5.js","assets/dou.be620a1c.css","assets/list1.20055c67.js","assets/list1.ddb9c7e7.css","assets/vendor.142b7855.js","assets/Animator.194adef1.js"])),o=S(()=>P(()=>import("./effect.4d4f76f8.js"),["assets/effect.4d4f76f8.js","assets/effect.6cd3eb68.css","assets/vendor.142b7855.js"])),a=S(()=>P(()=>import("./login.99c43616.js"),["assets/login.99c43616.js","assets/login.00e9ef09.css","assets/vendor.142b7855.js"])),l=S(()=>P(()=>import("./comments.522f19db.js"),["assets/comments.522f19db.js","assets/comments.9915b8ea.css","assets/vendor.142b7855.js"])),f=S(()=>P(()=>import("./index.fd27f92f.js"),["assets/index.fd27f92f.js","assets/index.708a4d29.css","assets/vendor.142b7855.js"])),x=m(!1),O=["","\u62FC\u547D\u52A0\u8F7D\u4E2D..."];let k=localStorage.getItem("user");d.isLogin.value=!!k;let j=localStorage.getItem("position");return j&&(u.value=JSON.parse(j)),(z,A)=>(h(),g("div",tt,[r(_).three?(h(),J(et,{key:0,class:"three_"})):w("",!0),r(_).control?(h(),g("div",{key:1,class:"anchor_",style:b({left:r(u).control.x+"px",top:r(u).control.y+"px"})},[p(r(t)),p(I,{from:"control"})],4)):w("",!0),r(_).dou?(h(),g("div",{key:2,class:"anchor_",style:b({left:r(u).dou.x+"px",top:r(u).dou.y+"px"})},[p(r(n)),p(I,{from:"dou"})],4)):w("",!0),r(_).net&&r(d).isLogin.value?(h(),g("div",{key:3,class:"anchor_",style:b({left:r(u).net.x+"px",top:r(u).net.y+"px"})},[p(r(s)),p(I,{from:"net"})],4)):w("",!0),r(_).lyric?(h(),g("div",{key:4,class:"anchor_",style:b({left:r(u).lyric.x+"px",top:r(u).lyric.y+"px"})},[p(r(e)),p(I,{from:"lyric"})],4)):w("",!0),r(_).effect?(h(),g("div",{key:5,class:"anchor_",style:b({left:r(u).effect.x+"px",top:r(u).effect.y+"px"})},[p(r(o)),p(I,{from:"effect"})],4)):w("",!0),r(_).comments?(h(),g("div",{key:6,class:"anchor_",style:b({left:r(u).comments.x+"px",top:r(u).comments.y+"px"})},[p(r(l)),p(I,{from:"comments"})],4)):w("",!0),r(_).piano?(h(),g("div",{key:7,class:"anchor_",style:b({left:r(u).piano.x+"px",top:r(u).piano.y+"px"})},[p(r(f)),p(I,{from:"piano"})],4)):w("",!0),r(d).isLogin.value?w("",!0):(h(),J(r(a),{key:8,class:"login_"})),p(De,{class:"menu_",onMouseleave:A[0]||(A[0]=()=>x.value=!1),style:b({transform:x.value?"translate(0px,0)":"translate(-200px,0)"})},null,8,["style"]),L("span",{class:"setting iconfont icon-shezhi",onMouseenter:A[1]||(A[1]=()=>x.value=!0)},null,32),L("span",st,K(O[r(d).msg.value]),1)]))}};var it=T(nt,[["__scopeId","data-v-ef6e70a8"]]);const ot={setup(i){let e=localStorage.getItem("show");return _?_.value=JSON.parse(e):localStorage.setItem("show",JSON.stringify(Z(_.value))),(s,t)=>(h(),J(it))}};be(ot).mount("#app");export{T as _,yt as a,_t as b,ct as c,ht as d,ut as e,mt as f,dt as g,ft as h,lt as i,gt as l,v as p,pt as s,ze as t};
