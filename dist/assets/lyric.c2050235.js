import{p}from"./Player.236a5206.js";import{b as S}from"./request.baad4db3.js";import{A as w}from"./Animator.1cafd2aa.js";import{_ as k}from"./index.b94bbff8.js";import{r as B,m as A,q as Y,o as E,c as L,a as N}from"./vendor.07b563a4.js";const T={class:"lyric"},q={setup(G){const u=B(null),m=400,r=200,v=r/2;let s=r/2,d=r/6,c,e,o,a=[],i=0,l=0;A(()=>{h()}),Y(()=>{x(p.music.value)});function x(t){t.name&&(i=0,l=0,s=v,a=[],f(),t.platform=="net"&&S(t.id).then(n=>{a=n,f(),p.updateNetCb=g}))}function g(){let t=p.audio.currentTime;for(let n in a)if(t<a[n].second){if(l=n-1<0?0:n-1,l!=i){let y=(i-l)*d,b=v-i*d;i=l;let _=new w(300);_.updateCb=C=>{s=b+y*(C/300),f()},_.endedCb=()=>{},_.start()}break}}function h(){c=u.value,e=c.getContext("2d"),o=e.createLinearGradient(0,0,0,r),o.addColorStop("0","rgba(0,255,255,0)"),o.addColorStop("0.5","rgba(0,255,255,1)"),o.addColorStop("1.0","rgba(0,255,255,0)")}function f(){c.width=m,c.height=r,e.fillStyle=o,e.font="17px ''",e.textBaseline="middle",e.textAlign="center";for(let t=0;t<a.length;t++)e.fillText(a[t].content,m/2,d*t+s)}return(t,n)=>(E(),L("div",T,[N("canvas",{ref_key:"canvas_",ref:u,id:"canvas"},null,512)]))}};var D=k(q,[["__scopeId","data-v-c32173cc"]]);export{D as default};
